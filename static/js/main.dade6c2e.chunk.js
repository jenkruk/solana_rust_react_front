(this.webpackJsonpsolana_rust_react_front=this.webpackJsonpsolana_rust_react_front||[]).push([[0],{114:function(e,t,n){"use strict";n.r(t);var c=n(22),r=n.n(c),a=n(68),o=n.n(a),s=(n(82),n(0)),i=n(2),u=n(7),l=(n(83),n(10)),b=n(32),f=n(76),p=n(16),d=b.c.SystemProgram,j=Object.values(f._keypair.secretKey),v=new Uint8Array(j),O=b.c.Keypair.fromSecretKey(v),h=new l.PublicKey("3qbP7m8xbYkYzm6avvS2RMo3DiLz2rvvZ1HjxunPS3XJ"),x=Object(l.clusterApiUrl)("devnet"),g="processed",m=function(){var e=new l.Connection(x,g);return new b.a(e,window.solana,g)},w=function(){var e=Object(c.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(u.a)(a,2),l=o[0],f=o[1],j=Object(c.useState)([]),v=Object(u.a)(j,2),x=v[0],g=v[1],w=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){var t,n,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=window)||void 0===t||null===(n=t.solana)||void 0===n||!n.isPhantom){e.next=9;break}return console.log("Phantom wallet found!"),e.next=4,window.solana.connect({onlyIfTrusted:!0});case 4:c=e.sent,console.log("Connected with Public Key:",c.publicKey.toString()),r(c.publicKey.toString()),e.next=10;break;case 9:alert("Solana object not found! Get a Phantom Wallet \ud83d\udc7b");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){var t,n,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window,!(n=t.solana)){e.next=7;break}return e.next=4,n.connect();case 4:c=e.sent,console.log("Connected with Public Key:",c.publicKey.toString()),r(c.publicKey.toString());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){var t,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("click"),e.prev=1,t=m(),e.next=5,N();case 5:return n=e.sent,console.log("ping"),e.next=9,n.rpc.startStuffOff({accounts:{baseAccount:O.publicKey,user:t.wallet.publicKey,systemProgram:d.programId},signers:[O]});case 9:return console.log("Created a new BaseAccount w/ address:",O.publicKey.toString()),e.next=12,P();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log("Error creating BaseAccount account:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){var t,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==l.length){e.next=3;break}return console.log("No gif link given!"),e.abrupt("return");case 3:return f(""),console.log("Gif link:",l),e.prev=5,t=m(),e.next=9,N();case 9:return n=e.sent,e.next=12,n.rpc.addGif(l,{accounts:{baseAccount:O.publicKey,user:t.wallet.publicKey}});case 12:return console.log("GIF successfully sent to program",l),e.next=15,P();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),console.log("Error sending GIF:",e.t0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(){return e.apply(this,arguments)}}(),K=function(e){var t=e.target.value;f(t)},N=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.b.fetchIdl(h,m());case 2:return t=e.sent,e.abrupt("return",new b.b(t,h,m()));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){var t,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N();case 3:return t=e.sent,e.next=6,t.account.baseAccount.fetch(O.publicKey);case 6:n=e.sent,console.log("Got the account",n),g(n.gifList),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error in getGifList: ",e.t0),g(null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){n&&(console.log("Fetching GIF list..."),P())}),[n]),Object(c.useEffect)((function(){var e=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("load",e),function(){return window.removeEventListener("load",e)}}),[]),Object(p.jsx)("div",{className:"App",children:Object(p.jsx)("div",{className:n?"authed-container":"container",children:Object(p.jsxs)("div",{className:"header-container",children:[Object(p.jsx)("p",{className:"header",children:" Solana Blockchain Dance Party "}),Object(p.jsx)("p",{className:"sub-text",children:"You're invited!"}),!n&&Object(p.jsx)("button",{className:"cta-button connect-wallet-button",onClick:y,children:"Connect to Wallet"}),n&&(null===x?Object(p.jsx)("div",{className:"connected-container",children:Object(p.jsx)("button",{className:"cta-button submit-gif-button",onClick:k,children:"Do One-Time Initialization For GIF Program Account"})}):Object(p.jsxs)("div",{className:"connected-container",children:[Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),S()},children:[Object(p.jsx)("input",{type:"text",placeholder:"Enter gif link!",value:l,onChange:K}),Object(p.jsx)("button",{type:"submit",className:"cta-button submit-gif-button",children:"Submit"})]}),Object(p.jsx)("div",{className:"gif-grid",children:x.map((function(e,t){return Object(p.jsx)("div",{className:"gif-item",children:Object(p.jsx)("img",{src:e.gifLink,alt:"gif"})},t)}))})]}))]})})})};o.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(w,{})}),document.getElementById("root"))},70:function(e,t){},74:function(e,t){},76:function(e){e.exports=JSON.parse('{"_keypair":{"publicKey":{"0":113,"1":239,"2":253,"3":126,"4":62,"5":114,"6":63,"7":196,"8":110,"9":192,"10":193,"11":108,"12":153,"13":216,"14":33,"15":122,"16":208,"17":237,"18":74,"19":226,"20":62,"21":51,"22":135,"23":22,"24":194,"25":216,"26":193,"27":86,"28":190,"29":70,"30":133,"31":236},"secretKey":{"0":241,"1":185,"2":247,"3":134,"4":238,"5":130,"6":244,"7":72,"8":8,"9":80,"10":101,"11":33,"12":45,"13":119,"14":61,"15":179,"16":20,"17":217,"18":200,"19":51,"20":209,"21":20,"22":149,"23":118,"24":237,"25":46,"26":101,"27":151,"28":22,"29":139,"30":32,"31":24,"32":113,"33":239,"34":253,"35":126,"36":62,"37":114,"38":63,"39":196,"40":110,"41":192,"42":193,"43":108,"44":153,"45":216,"46":33,"47":122,"48":208,"49":237,"50":74,"51":226,"52":62,"53":51,"54":135,"55":22,"56":194,"57":216,"58":193,"59":86,"60":190,"61":70,"62":133,"63":236}}}')},82:function(e,t,n){},83:function(e,t,n){},95:function(e,t){}},[[114,1,2]]]);
//# sourceMappingURL=main.dade6c2e.chunk.js.map