{"version":3,"sources":["Components/Footer.js","App.js","index.js"],"names":["Footer","className","href","target","rel","SystemProgram","web3","arr","Object","values","kp","_keypair","secretKey","secret","Uint8Array","baseAccount","Keypair","fromSecretKey","programID","PublicKey","network","clusterApiUrl","opts","getProvider","connection","Connection","AnchorProvider","window","solana","console","log","innerWidth","App","useState","walletAddress","setWalletAddress","inputValue","setInputValue","gifList","setGifList","checkIfWalletIsConnected","isPhantom","connect","onlyIfTrusted","response","publicKey","toString","alert","connectWallet","createGifAccount","provider","getProgram","program","rpc","startStuffOff","accounts","user","wallet","systemProgram","programId","signers","getGifList","sendGif","length","addGif","onInputChange","event","value","Program","fetchIdl","idl","account","fetch","useEffect","onLoad","addEventListener","removeEventListener","onClick","onSubmit","preventDefault","type","placeholder","onChange","map","item","index","src","gifLink","alt","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.13b80400.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Footer = () => {\n\treturn (\n\t\t<div className='footer'>\n\t\t\t<p>\n\t\t\t\tUsing React to display current and new giphs on the Solana blockchain\n\t\t\t\tthrough a Rust contract.\n\t\t\t</p>\n\t\t\t<div className='footer_links'>\n\t\t\t\t<a\n\t\t\t\t\thref='https://github.com/jenkruk/solana_rust_react_front'\n\t\t\t\t\ttarget='_blank'\n\t\t\t\t\trel='noreferrer'\n\t\t\t\t>\n\t\t\t\t\t<span>ðŸ”— </span> &nbsp; Github Repo for frontend\n\t\t\t\t</a>\n\t\t\t\t<a\n\t\t\t\t\thref='https://github.com/jenkruk/solana_rust_backend'\n\t\t\t\t\ttarget='_blank'\n\t\t\t\t\trel='noreferrer'\n\t\t\t\t>\n\t\t\t\t\t<span>ðŸ”— </span> &nbsp; Github Repo for contract\n\t\t\t\t</a>\n\t\t\t\t<a\n\t\t\t\t\thref='https://explorer.solana.com/address/3qbP7m8xbYkYzm6avvS2RMo3DiLz2rvvZ1HjxunPS3XJ?cluster=devnet&utm_source=buildspace.so&utm_medium=buildspace_project'\n\t\t\t\t\ttarget='_blank'\n\t\t\t\t\trel='noreferrer'\n\t\t\t\t>\n\t\t\t\t\t<span>ðŸ”— </span> &nbsp; Contract on Solana\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Footer;\n","import './app.css'\nimport React, { useEffect, useState } from \"react\";\nimport { Connection, PublicKey, clusterApiUrl } from \"@solana/web3.js\";\nimport { Program, AnchorProvider, web3 } from \"@project-serum/anchor\";\nimport kp from \"./keypair.json\";\nimport Footer from './Components/Footer'\n\n// SystemProgram is a reference to the Solana runtime!\nconst { SystemProgram } = web3;\n\nconst arr = Object.values(kp._keypair.secretKey);\nconst secret = new Uint8Array(arr);\nconst baseAccount = web3.Keypair.fromSecretKey(secret);\n\n// This is the address of your solana program, if you forgot, just run solana address -k target/deploy/myepicproject-keypair.json\nconst programID = new PublicKey(\"3qbP7m8xbYkYzm6avvS2RMo3DiLz2rvvZ1HjxunPS3XJ\");\n\n// Set our network to devnet.\nconst network = clusterApiUrl(\"devnet\");\n\n// Controls how we want to acknowledge when a transaction is \"done\".\nconst opts = {\n\tpreflightCommitment: \"processed\",\n};\n\nconst getProvider = () => {\n\tconst connection = new Connection(network, opts.preflightCommitment);\n\tconst provider = new AnchorProvider(\n\t\tconnection,\n\t\twindow.solana,\n\t\topts.preflightCommitment\n\t);\n\treturn provider;\n};\n\nconsole.log(window.innerWidth);\n\nconst App = () => {\n\tconst [walletAddress, setWalletAddress] = useState(null);\n\tconst [inputValue, setInputValue] = useState(\"\");\n\tconst [gifList, setGifList] = useState([]);\n\n\t// is phantom wallet connected?\n\tconst checkIfWalletIsConnected = async () => {\n\t\t// Using optional chaining (question mark) to check if the object is null\n\t\tif (window?.solana?.isPhantom) {\n\t\t\tconsole.log(\"Phantom wallet found!\");\n\t\t\t/* Connect directly with the user's wallet */\n\t\t\tconst response = await window.solana.connect({ onlyIfTrusted: true });\n\t\t\tconsole.log(\"Connected with Public Key:\", response.publicKey.toString());\n\t\t\tsetWalletAddress(response.publicKey.toString());\n\t\t} else {\n\t\t\talert(\"Solana object not found! Get a Phantom Wallet ðŸ‘»\");\n\t\t}\n\t};\n\n\tconst connectWallet = async () => {\n\t\tconst { solana } = window;\n\n\t\tif (solana) {\n\t\t\tconst response = await solana.connect();\n\t\t\tconsole.log(\"Connected with Public Key:\", response.publicKey.toString());\n\t\t\tsetWalletAddress(response.publicKey.toString());\n\t\t}\n\t};\n\n\tconst createGifAccount = async () => {\n\t\tconsole.log(\"click\");\n\t\ttry {\n\t\t\tconst provider = getProvider();\n\t\t\tconst program = await getProgram();\n\n\t\t\tconsole.log(\"ping\");\n\t\t\tawait program.rpc.startStuffOff({\n\t\t\t\taccounts: {\n\t\t\t\t\tbaseAccount: baseAccount.publicKey,\n\t\t\t\t\tuser: provider.wallet.publicKey,\n\t\t\t\t\tsystemProgram: SystemProgram.programId,\n\t\t\t\t},\n\t\t\t\tsigners: [baseAccount],\n\t\t\t});\n\t\t\tconsole.log(\n\t\t\t\t\"Created a new BaseAccount w/ address:\",\n\t\t\t\tbaseAccount.publicKey.toString()\n\t\t\t);\n\t\t\tawait getGifList();\n\t\t} catch (error) {\n\t\t\tconsole.log(\"Error creating BaseAccount account:\", error);\n\t\t}\n\t};\n\n\tconst sendGif = async () => {\n\t\tif (inputValue.length === 0) {\n\t\t\tconsole.log(\"No gif link given!\");\n\t\t\treturn;\n\t\t}\n\t\tsetInputValue(\"\");\n\t\tconsole.log(\"Gif link:\", inputValue);\n\t\ttry {\n\t\t\tconst provider = getProvider();\n\t\t\tconst program = await getProgram();\n\n\t\t\tawait program.rpc.addGif(inputValue, {\n\t\t\t\taccounts: {\n\t\t\t\t\tbaseAccount: baseAccount.publicKey,\n\t\t\t\t\tuser: provider.wallet.publicKey,\n\t\t\t\t},\n\t\t\t});\n\t\t\tconsole.log(\"GIF successfully sent to program\", inputValue);\n\n\t\t\tawait getGifList();\n\t\t} catch (error) {\n\t\t\tconsole.log(\"Error sending GIF:\", error);\n\t\t}\n\t};\n\n\tconst onInputChange = (event) => {\n\t\tconst { value } = event.target;\n\t\tsetInputValue(value);\n\t};\n\n\tconst renderNotConnectedContainer = () => (\n\t\t<button\n\t\t\tclassName='cta-button connect-wallet-button'\n\t\t\tonClick={connectWallet}\n\t\t>\n\t\t\tConnect to Wallet\n\t\t</button>\n\t);\n\n\tconst renderConnectedContainer = () => {\n\t\t// If we hit this, it means the program account hasn't been initialized.\n\t\tif (gifList === null) {\n\t\t\treturn (\n\t\t\t\t<div className='connected-container'>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName='cta-button submit-gif-button'\n\t\t\t\t\t\tonClick={createGifAccount}\n\t\t\t\t\t>\n\t\t\t\t\t\tDo One-Time Initialization For GIF Program Account\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\t// Otherwise, we're good! Account exists. User can submit GIFs.\n\t\telse {\n\t\t\treturn (\n\t\t\t\t<div className='connected-container'>\n\t\t\t\t\t<form\n\t\t\t\t\t\tonSubmit={(event) => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tsendGif();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\tplaceholder='Enter your dance gif here!'\n\t\t\t\t\t\t\tvalue={inputValue}\n\t\t\t\t\t\t\tonChange={onInputChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button type='submit' className='cta-button submit-gif-button'>\n\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</form>\n\t\t\t\t\t<div className='giphy_link'>\n\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref='https://giphy.com/search/dance-party'\n\t\t\t\t\t\t\trel='noreferrer'\n\t\t\t\t\t\t\ttarget='_blank'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tGo to giphy.com\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='gif-grid'>\n\t\t\t\t\t\t{/* We use index as the key instead, also, the src is now item.gifLink */}\n\t\t\t\t\t\t{gifList.map((item, index) => (\n\t\t\t\t\t\t\t<div className='gif-item' key={index}>\n\t\t\t\t\t\t\t\t<img src={item.gifLink} alt='gif' />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Footer />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t};\n\n\tconst getProgram = async () => {\n\t\t// Get metadata about your solana program\n\t\tconst idl = await Program.fetchIdl(programID, getProvider());\n\t\t// Create a program that you can call\n\t\treturn new Program(idl, programID, getProvider());\n\t};\n\n\tconst getGifList = async () => {\n\t\ttry {\n\t\t\tconst program = await getProgram();\n\t\t\tconst account = await program.account.baseAccount.fetch(\n\t\t\t\tbaseAccount.publicKey\n\t\t\t);\n\n\t\t\tconsole.log(\"Got the account\", account);\n\t\t\tsetGifList(account.gifList);\n\t\t} catch (error) {\n\t\t\tconsole.log(\"Error in getGifList: \", error);\n\t\t\tsetGifList(null);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (walletAddress) {\n\t\t\tconsole.log(\"Fetching GIF list...\");\n\t\t\tgetGifList();\n\t\t}\n\t}, [walletAddress]); /* eslint-disable-line */\n\n\tuseEffect(() => {\n\t\tconst onLoad = async () => {\n\t\t\tawait checkIfWalletIsConnected();\n\t\t};\n\n\t\twindow.addEventListener(\"load\", onLoad);\n\t\treturn () => window.removeEventListener(\"load\", onLoad);\n\t}, []);\n\n\treturn (\n\t\t<div className='App'>\n\t\t\t{/* This was solely added for some styling fanciness */}\n\t\t\t<div className={walletAddress ? \"authed-container\" : \"container\"}>\n\t\t\t\t<div className='header-container'>\n\t\t\t\t\t<p className='header'> Solana Blockchain Dance Party </p>\n\t\t\t\t\t<p className='sub-text'>You're invited!</p>\n\t\t\t\t\t{/* Add the condition to show this only if we don't have a wallet address */}\n\t\t\t\t\t{!walletAddress && renderNotConnectedContainer()}\n\t\t\t\t\t{walletAddress && renderConnectedContainer()}\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n\n\t\t</div>\n\t);\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}